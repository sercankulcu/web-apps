<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Kelime Oyunu - TÃ¼rkÃ§e Harf Bulmaca</title>

  <meta name="theme-color" content="#f0f0f0">
  <meta name="description"
    content="DorukDayÄ±m'da harflerden kelime tÃ¼retme oyunu ile zekanÄ±zÄ± geliÅŸtirin. Verilen harflerle en Ã§ok kelimeyi bularak puanlarÄ± toplayÄ±n.">
  <link rel="icon" href="/icons/favicon.ico" type="image/png">

  <meta property="og:title" content="Kelime Oyunu - TÃ¼rkÃ§e Harf Bulmaca">
  <meta property="og:description"
    content="DorukDayÄ±m'da harflerden kelime tÃ¼retme oyunu ile zekanÄ±zÄ± geliÅŸtirin. Verilen harflerle en Ã§ok kelimeyi bularak puanlarÄ± toplayÄ±n.">
  <meta property="og:image" content="https://dorukdayim.netlify.app/icons/icon-128x128.png" />
  <meta property="og:url" content="https://dorukdayim.netlify.app/birkelime.html">
  <meta property="og:type" content="game">
  <meta property="og:image:width" content="128" />
  <meta property="og:image:height" content="128" />
  <meta property="og:locale" content="tr_TR" />
  <meta property="og:site_name" content="DorukDayÄ±m" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Kelime Oyunu - TÃ¼rkÃ§e Harf Bulmaca">
  <meta name="twitter:description"
    content="DorukDayÄ±m'da harflerden kelime tÃ¼retme oyunu ile zekanÄ±zÄ± geliÅŸtirin. Verilen harflerle en Ã§ok kelimeyi bularak puanlarÄ± toplayÄ±n.">
  <meta name="twitter:image" content="https://dorukdayim.netlify.app/icons/icon-240x126.png" />
  <meta name="twitter:image:alt" content="A picture of a coffee man icon" />

  <meta http-equiv="Content-Language" content="tr">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="keywords"
    content="harflerden kelime tÃ¼retme, tÃ¼rkÃ§e kelime oyunu, zeka oyunlarÄ±, dorukdayÄ±m, kelime oyunu oyna, harf bulmaca">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://dorukdayim.netlify.app/birkelime.html">
  <meta name="author" content="Sercan/DorukdayÄ±m">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <style>
    .game-container {
      margin: 0 auto;
      text-align: center;
      padding: 1vh;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      max-width: 600px;
    }

    .letters-container {
      display: flex;
      gap: 4px;
      justify-content: center;
      max-width: 100%;
      margin: 2vh 0px;
      padding: 20px 1px;
      border-radius: 5px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }

    .letter {
      width: 12vw;
      max-width: 45px;
      height: 12vw;
      max-height: 45px;
      background-color: #4CAF50;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      border-radius: 5px;
      transition: background-color 0.2s ease;
    }

    input {
      margin: 2vh;
      padding: 2vh;
      font-size: 1.2rem;
      border: 2px solid #ddd;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      border-radius: 5px;
      text-align: center;
    }

    button {
      width: 50%;
      background-color: #2196F3;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 1.2rem;
      margin: 2vh;
      padding: 2vh;
      transition: transform 0.2s ease, background-color 0.2s ease;
    }

    button:hover {
      background-color: #1976D2;
    }

    .score-timer-row {
      display: flex;
      justify-content: space-between;
      padding: 15px;
      border-radius: 5px;
      font-size: 2rem;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    #timer {
      color: #ff5722;
    }

    #message {
      text-align: center;
      font-size: 1.2rem;
    }

    #initialMessage {
      position: fixed;
      width: 50%;
      max-width: 400px;
      height: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 30px;
      border: 2px solid #000;
      text-align: center;
      z-index: 1001;
      box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
      font-size: 1.2rem;
      color: #333;
      border-radius: 10px;
    }

    #overlay {
      position: fixed;
      top: 0;
      left: 0;
      height: 100%;
      background: #333333;
      color: #f9f9f9;
      z-index: 1000;
      overflow-y: auto;
      padding: 10px;
      text-align: justify;
      display: none;
    }
  </style>
</head>

<body>
  <div id="initialMessage">
    <p>Ana sayfaya dÃ¶nmek iÃ§in baÅŸlÄ±ÄŸa <strong>(Bir Kelime)</strong> tÄ±klayÄ±nÄ±z.</p>
    <p>Oyuna baÅŸlamak iÃ§in herhangi bir yere tÄ±klayÄ±nÄ±z.</p>
  </div>
  <div class="game-container">
    <h1 id="title">Bir Kelime</h1>
    <div class="score-timer-row">
      <span id="score">Puan: 0</span>
      <span id="timer">SÃ¼re: 30</span>
    </div>
    <div class="letters-container" id="letters"></div>
    <input type="text" id="wordInput" placeholder="Kelimenizi yazÄ±n" maxlength="7">
    <button id="checkButton">Kontrol Et</button>
    <div id="message"></div>
  </div>

  <button id="infoButton"
    style="position: absolute; margin: 0; padding: 0; top: 10px; right: 10px; font-size: 1.5em; background: #ff5722; color: white; border: none; border-radius: 50%; width: 30px; height: 30px; cursor: pointer;">?</button>

  <div id="overlay">
    <button id="closeButton"
      style="position: absolute; margin: 0; padding: 0; top: 10px; right: 10px; font-size: 1.5em; background: #ff5722; color: white; border: none; border-radius: 50%; width: 30px; height: 30px; cursor: pointer;">X</button>
    <h2>Kelime Oyunu NasÄ±l OynanÄ±r?</h2>
    <p>
      Kelime Oyunu, verilen harflerle anlamlÄ± TÃ¼rkÃ§e kelimeler tÃ¼retme Ã¼zerine kurulu bir zeka oyunudur. Oyuna
      baÅŸladÄ±ÄŸÄ±nÄ±zda, ekranda rastgele seÃ§ilmiÅŸ harfler gÃ¶rÃ¼rsÃ¼nÃ¼z.
      AmacÄ±nÄ±z, bu harfleri kullanarak en Ã§ok kelimeyi bulmak ve puanlarÄ± toplamaktÄ±r. Oyunun sÃ¼resi sÄ±nÄ±rlÄ±dÄ±r,
      bu nedenle hÄ±zlÄ± ve doÄŸru kelimeler bulmanÄ±z Ã¶nemlidir.
      Kelimeyi bulduktan sonra, kelimeyi giriÅŸ alanÄ±na yazÄ±p "Kontrol Et" butonuna tÄ±klayarak kelimenin
      geÃ§erliliÄŸini kontrol edebilirsiniz.
      GeÃ§erli kelimeler size puan kazandÄ±rÄ±rken, geÃ§ersiz kelimeler puan kaybettirmez. Oyunun sonunda, en yÃ¼ksek
      puana ulaÅŸan oyuncu oyunu kazanÄ±r.
    </p>

    <h2>Kelime Oyununun FaydalarÄ±</h2>
    <ul>
      <li><strong>Kelime Bilgisi GeliÅŸimi:</strong> Oyun, TÃ¼rkÃ§e kelime daÄŸarcÄ±ÄŸÄ±nÄ±zÄ± geniÅŸletmenize yardÄ±mcÄ±
        olur.</li>
      <li><strong>HÄ±zlÄ± DÃ¼ÅŸÃ¼nme:</strong> SÄ±nÄ±rlÄ± sÃ¼rede kelime bulmak, hÄ±zlÄ± dÃ¼ÅŸÃ¼nme yeteneÄŸinizi geliÅŸtirir.
      </li>
      <li><strong>MantÄ±ksal AkÄ±l YÃ¼rÃ¼tme:</strong> Harfleri bir araya getirerek kelime tÃ¼retmek, mantÄ±ksal akÄ±l
        yÃ¼rÃ¼tme becerilerinizi artÄ±rÄ±r.</li>
      <li><strong>Odaklanma ve Konsantrasyon:</strong> Oyunda baÅŸarÄ±lÄ± olmak iÃ§in odaklanmanÄ±z ve konsantre
        olmanÄ±z gerekir.</li>
      <li><strong>Zihinsel Ã‡eviklik:</strong> SÃ¼rekli olarak yeni kelimeler tÃ¼retmek, zihinsel Ã§evikliÄŸinizi
        artÄ±rÄ±r.</li>
      <li><strong>EÄŸlenceli Ã–ÄŸrenme:</strong> Kelime tÃ¼retme oyunu, Ã¶ÄŸrenmeyi eÄŸlenceli hale getirir ve
        motivasyonunuzu artÄ±rÄ±r.</li>
    </ul>

    <p>
      Kelime Oyunu, zeka oyunlarÄ± ve kelime oyunlarÄ± kategorilerinde popÃ¼ler bir oyundur. Oyun, her yaÅŸtan
      kullanÄ±cÄ± iÃ§in uygundur ve TÃ¼rkÃ§e kelime bilgisini geliÅŸtirmek isteyenler iÃ§in idealdir.
      Oyunun mobil uyumlu olmasÄ±, kullanÄ±cÄ±larÄ±n istedikleri zaman ve yerde oyunu oynayabilmelerini saÄŸlar. Oyunun
      sosyal medya platformlarÄ±nda paylaÅŸÄ±lmasÄ±, daha geniÅŸ bir kitleye ulaÅŸmasÄ±na yardÄ±mcÄ± olur.
    </p>

  </div>

  <script type="module">
    import { words } from 'https://sercankulcu.github.io/game/birkelimewords.js';

    let score = 0;
    let letters = [];
    let timer;
    let timeLeft = 30;
    let isValidTDK = true;
    let foundWords = [];

    const titleElement = document.getElementById('title');
    titleElement.addEventListener('click', function () {
      if (window.parent !== window) {
        window.parent.showMainContent();
      } else {
        window.location.href = 'index.html';
      }
    });

    const infoButton = document.getElementById('infoButton');
    const overlay = document.getElementById('overlay');
    const closeButton = document.getElementById('closeButton');

    infoButton.addEventListener('click', () => {
      overlay.style.display = 'block';
    });

    closeButton.addEventListener('click', () => {
      overlay.style.display = 'none';
    });

    function generateLetters() {
      // Weighted pools of frequently used letters in Turkish
      const vowels = [
        'A', 'A', 'A', 'E', 'E', 'E', 'Ä°', 'Ä°', 'Ä°', // Very common
        'I', 'I', 'O', 'O', 'U', 'U',             // Moderately common
        'Ã–', 'Ãœ'                                  // Less common
      ];
      const consonants = [
        'N', 'N', 'N', 'R', 'R', 'R', 'L', 'L', 'L', 'K', 'K', 'K', 'T', 'T', 'T', 'S', 'S', 'S', 'M', 'M', 'M', // Very common
        'B', 'B', 'D', 'D', 'Y', 'Y', 'P', 'P', 'C', 'C', 'Ã‡', 'Ã‡', 'Å', 'Å',           // Moderately common
        'F', 'G', 'H', 'V', 'Z', 'Ä', 'J'                                       // Less common
      ];

      // 3 sesli + 4 sessiz harf
      let newLetters = [
        ...vowels.sort(() => 0.5 - Math.random()).slice(0, 3),
        ...consonants.sort(() => 0.5 - Math.random()).slice(0, 4)
      ].sort(() => 0.5 - Math.random());

      return newLetters;
    }

    function updateLetters() {
      const container = document.getElementById('letters');
      container.innerHTML = '';
      letters.forEach(letter => {
        const div = document.createElement('div');
        div.className = 'letter';
        div.textContent = letter;
        div.addEventListener('click', () => appendLetter(letter)); // Add click handler
        container.appendChild(div);
      });
      foundWords = [];
    }

    function appendLetter(letter) {
      const input = document.getElementById('wordInput');
      if (input.value.length < input.maxLength) { // Respect maxlength="6"
        input.value += letter;
      }
    }

    function startTimer() {
      clearInterval(timer);
      timeLeft = 30;
      timer = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').textContent = `SÃ¼re: ${timeLeft}`;

        if (timeLeft <= 0) {
          clearInterval(timer);
          letters = generateLetters();
          updateLetters();
          startTimer();
        }
      }, 1000);
    }

    function checkDictionary(word) {

      isValidTDK = false;
      if (words.includes(word.turkishToLower()) && !foundWords.includes(word)) {
        isValidTDK = true;
        foundWords.push(word);
      }
    }

    function checkTDK(word) {

      isValidTDK = false;
      fetch("https://sozluk.gov.tr/gts?ara=" + word)
        .then((response) => response.json())
        .then((json) => {
          if (json.length != undefined) {
            isValidTDK = true;
          } else {
            isValidTDK = false;
          }
        })
        .catch(error => console.error(error.message));
    }

    String.prototype.turkishToUpper = function () {
      var string = this;
      var letters = { "i": "Ä°", "ÅŸ": "Å", "ÄŸ": "Ä", "Ã¼": "Ãœ", "Ã¶": "Ã–", "Ã§": "Ã‡", "Ä±": "I" };
      string = string.replace(/(([iÄ±ÅŸÄŸÃ¼Ã§Ã¶]))/g, function (letter) { return letters[letter]; })
      return string.toUpperCase();
    }

    String.prototype.turkishToLower = function () {
      var string = this;
      var letters = { "Ä°": "i", "I": "Ä±", "Å": "ÅŸ", "Ä": "ÄŸ", "Ãœ": "Ã¼", "Ã–": "Ã¶", "Ã‡": "Ã§" };
      string = string.replace(/(([Ä°IÅÄÃœÃ‡Ã–]))+/g, function (letter) { return letters[letter]; })
      return string.toLowerCase();
    }

    async function checkWord() {

      let isValid = true;
      const input = document.getElementById('wordInput').value;
      const backupInput = input.turkishToUpper();
      const tempLetters = [...letters];

      for (let char of backupInput) {
        const index = tempLetters.indexOf(char);
        if (index === -1) {
          isValid = false;
          break;
        }
        tempLetters.splice(index, 1);
      }

      if (isValid) {
        try {
          isValidTDK = true;
          await checkDictionary(input);
          //await checkTDK(input); 
          //await new Promise(resolve => setTimeout(resolve, 1000)); 
        } catch (error) {
          isValidTDK = false;
        }
      }

      if (isValidTDK && input.length >= 2) {
        score += input.length * 10;
        document.getElementById('score').textContent = `Puan: ${score}`;
        showMessage(`+${input.length * 10} puan kazandÄ±nÄ±z!`, 'green');
      } else {
        showMessage('GeÃ§ersiz kelime!', 'red');
      }
      document.getElementById('wordInput').value = '';
    }

    function showMessage(text, color) {
      const messageDiv = document.getElementById('message');
      let emojiText = color === 'green' ? `ğŸ‰ ${text}` : `âŒ ${text}`;
      messageDiv.textContent = emojiText;
      messageDiv.style.color = color;
      setTimeout(() => messageDiv.textContent = '', 2000);
    }

    function newGame() {
      score = 0;
      document.getElementById('score').textContent = `Puan: ${score}`;
      document.getElementById('wordInput').value = '';
      letters = generateLetters();
      updateLetters();
      startTimer();
    }

    // Global keydown listener
    document.addEventListener('keydown', (event) => {
      const key = event.key.turkishToUpper(); // Convert to uppercase Turkish letters
      const input = document.getElementById('wordInput');

      // If key matches one of the displayed letters and input isn't full
      if (letters.includes(key) && input.value.length < input.maxLength) {
        input.value += key; // Append the letter
        event.preventDefault(); // Prevent default behavior (e.g., typing elsewhere)
      }

      // If Enter is pressed, trigger checkButton
      if (event.key === 'Enter') {
        event.preventDefault();
        checkWord();
      }

      // Remove last character on Backspace
      if (event.key === 'Backspace') {
        input.value = input.value.slice(0, -1); // Remove the last character
        event.preventDefault();
      }
    });

    // Keep existing listeners (this one can stay but is optional now)
    document.getElementById('wordInput').addEventListener('keydown', (event) => {
      if (event.key === 'Enter') {
        event.preventDefault();
        document.getElementById('checkButton').click();
      }
    });

    document.getElementById('checkButton').addEventListener('click', checkWord);

    document.addEventListener('click', () => {
      document.getElementById('initialMessage').style.display = 'none';
    });

    newGame();
  </script>
</body>

</html>